{% extends "base.html" %} {% block title %}Your Cart — ShopAPI Demo{% endblock
%} {% block content %}

<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="text-3xl font-bold text-slate-800">Shopping Cart</h1>
    <p class="text-slate-500 mt-1">
      {{ items|length }} item{% if items|length != 1 %}s{% endif %}
    </p>
  </div>
  <a
    href="/web/products"
    class="flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800 font-medium transition-colors"
  >
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M15 19l-7-7 7-7"
      />
    </svg>
    Continue Shopping
  </a>
</div>

{% if items %}
<div class="lg:flex lg:gap-8">
  <!-- Cart Items -->
  <div class="flex-1 space-y-4 mb-6 lg:mb-0">
    {% for item in items %}
    <div
      class="bg-white rounded-2xl border border-slate-200 p-5 flex items-center gap-5"
    >
      <!-- Icon -->
      <div
        class="w-16 h-16 rounded-xl flex items-center justify-center shrink-0"
        style="background: linear-gradient(135deg, #eef2ff, #c7d2fe)"
      >
        <svg
          class="w-8 h-8 text-indigo-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
          />
        </svg>
      </div>

      <!-- Info -->
      <div class="flex-1 min-w-0">
        <a
          href="/web/products/{{ item.product_id }}"
          class="font-semibold text-slate-800 hover:text-indigo-600 transition-colors"
        >
          {{ item.product.name }}
        </a>
        <div class="text-xs text-slate-400 font-mono mt-0.5">
          {{ item.product.sku }}
        </div>
        <div class="text-indigo-600 font-bold mt-1">
          ${{ "%.2f"|format(item.product.price) }} each
        </div>
      </div>

      <!-- Qty update -->
      <form
        method="POST"
        action="/web/cart/update/{{ item.id }}"
        class="flex items-center gap-2"
      >
        <input
          type="number"
          name="quantity"
          value="{{ item.quantity }}"
          min="1"
          max="{{ item.product.stock }}"
          class="w-16 px-2 py-1.5 border border-slate-200 rounded-lg text-sm text-center font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-400"
        />
        <button
          type="submit"
          class="text-xs font-semibold text-slate-500 hover:text-indigo-600 border border-slate-200 rounded-lg px-2 py-1.5 transition-colors hover:border-indigo-300"
        >
          Update
        </button>
      </form>

      <!-- Subtotal -->
      <div class="text-right shrink-0 ml-2">
        <div class="font-bold text-slate-800">
          ${{ "%.2f"|format(item.product.price * item.quantity) }}
        </div>
        <form
          method="POST"
          action="/web/cart/remove/{{ item.id }}"
          class="mt-1"
        >
          <button
            type="submit"
            class="text-xs text-red-400 hover:text-red-600 transition-colors"
          >
            Remove
          </button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Order Summary -->
  <div class="lg:w-80 shrink-0">
    <div class="bg-white rounded-2xl border border-slate-200 p-6 sticky top-24">
      <h2 class="font-bold text-lg text-slate-800 mb-4">Order Summary</h2>

      <div class="space-y-2 text-sm mb-4">
        {% for item in items %}
        <div class="flex justify-between text-slate-600">
          <span class="truncate mr-2"
            >{{ item.product.name }} × {{ item.quantity }}</span
          >
          <span class="font-medium shrink-0"
            >${{ "%.2f"|format(item.product.price * item.quantity) }}</span
          >
        </div>
        {% endfor %}
      </div>

      <div class="border-t border-slate-100 pt-4 mb-6">
        <div class="flex justify-between items-center">
          <span class="font-bold text-slate-800">Total</span>
          <span class="text-2xl font-extrabold gradient-text"
            >${{ "%.2f"|format(total) }}</span
          >
        </div>
      </div>

      <a
        href="/web/cart/checkout"
        class="btn-primary w-full text-white font-bold py-3.5 rounded-xl shadow-md flex items-center justify-center gap-2 hover:bg-slate-800 transition-colors"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        Proceed to Checkout
      </a>
    </div>
  </div>
</div>

{% else %}
<!-- Empty cart -->
<div class="bg-white rounded-2xl border border-slate-200 p-16 text-center">
  <div
    class="w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4"
    style="background: linear-gradient(135deg, #eef2ff, #c7d2fe)"
  >
    <svg
      class="w-8 h-8 text-indigo-400"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="1.5"
        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
      />
    </svg>
  </div>
  <h2 class="text-lg font-semibold text-slate-700 mb-2">Your cart is empty</h2>
  <p class="text-sm text-slate-400 mb-6">Start browsing and add some items!</p>
  <a
    href="/web/products"
    class="btn-primary inline-flex items-center gap-2 text-white text-sm font-semibold px-5 py-2.5 rounded-xl shadow-sm"
  >
    Browse Products
  </a>
</div>
{% endif %} {% endblock %}
